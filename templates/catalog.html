{% extends "base.html" %}
{% load static %}

{% block content %}
<h2>–ö–∞—Ç–∞–ª–æ–≥ PDF-—Ñ–∞–π–ª–æ–≤</h2>
<div class="catalog-container">
    {% for document in documents %}
    <div class="pdf-card" data-search-title="{{ document.title|lower }}" data-search-authors="{{ document.authors|lower }}" data-search-theme="{{ document.theme|default:''|lower }}" data-search-keywords="{{ document.keywords|default:''|lower }}">
        <div class="pdf-preview">
            {% if document.thumbnail %}
            <img src="{{ document.thumbnail.url }}" alt="{{ document.title }}">
            {% else %}
            <div class="pdf-icon">üìÑ</div>
            {% endif %}
        </div>
        <div class="pdf-info">
            <h3>{{ document.title }}</h3>
            {% if document.user != request.user %}
                <span class="badge badge-public-small">–ü—É–±–ª–∏—á–Ω—ã–π</span>
            {% endif %}
            <div class="pdf-meta">
                <span>{{ document.authors }}</span>
                <span>{{ document.upload_date|date:"d.m.Y" }}</span>
            </div>
            {% if document.theme %}
                <div class="document-theme" style="font-size: 0.9rem; color: #6c757d; margin-bottom: 0.5rem; font-style: italic;">{{ document.theme|truncatechars:80 }}</div>
            {% endif %}
            {% if document.keywords %}
                <div class="document-keywords" style="font-size: 0.85rem; color: #6c757d; margin-bottom: 0.5rem;"><strong>–ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞:</strong> {{ document.keywords|truncatechars:60 }}</div>
            {% endif %}
            <div class="pdf-actions">
                {% if document.user == request.user %}
                    <a href="{% url 'detailed' document.id %}" class="btn btn-primary" style="width: 100%;">
                        –û—Ç–∫—Ä—ã—Ç—å
                    </a>
                {% else %}
                    <a href="{% url 'public_detail' document.id %}" class="btn btn-primary" style="width: 100%;">
                        –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å
                    </a>
                {% endif %}
            </div>
        </div>
    </div>
    {% empty %}
    <p>–í—ã –µ—â—ë –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª–∏ –Ω–∏ –æ–¥–Ω–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞</p>
    {% endfor %}
</div>
{% endblock %}