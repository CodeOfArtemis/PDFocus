# Active Context

## –¢–µ–∫—É—â–∏–π —Ñ–æ–∫—É—Å
–ó–∞–≤–µ—Ä—à–µ–Ω–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –∏—Ç–µ—Ä–∞—Ü–∏—è –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é —Å–∏—Å—Ç–µ–º—ã –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞ PDF –∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö UI –ø—Ä–æ–±–ª–µ–º. –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –±–∞–≥–∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã.

## –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–ö–æ–º–º–∏—Ç 47cc2d3)

### 1. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã PDF –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞**
- **–ü—Ä–æ–±–ª–µ–º–∞**: `pdf-placeholder` –±—ã–ª –≤–ª–æ–∂–µ–Ω –≤–Ω—É—Ç—Ä–∏ `pdf-viewer`, –∏ –ø—Ä–∏ –æ—á–∏—Å—Ç–∫–µ `viewer.innerHTML = ''` —É–¥–∞–ª—è–ª—Å—è –∏–∑ DOM
- **–†–µ—à–µ–Ω–∏–µ**: –í—ã–Ω–µ—Å–µ–Ω `pdf-placeholder` –Ω–∞—Ä—É–∂—É –≤ `main.html` –∏ `detail.html`
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: PDF –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∑–∞–≥—Ä—É–∑–æ–∫

### 2. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤**
- **–ü—Ä–æ–±–ª–µ–º–∞**: Regex `^[–∞-—è—ë]+$` —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–ª –∞–Ω–≥–ª–∏–π—Å–∫–∏–µ –∏ —Å–æ—Å—Ç–∞–≤–Ω—ã–µ —Å–ª–æ–≤–∞ –∏–∑ –º–Ω–æ–≥–æ—è–∑—ã—á–Ω—ã—Ö PDF
- **–†–µ—à–µ–Ω–∏–µ**: –ò–∑–º–µ–Ω–µ–Ω –Ω–∞ `^[–∞-—è—ëa-z]+$` –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Ä—É—Å—Å–∫–∏—Ö –∏ –∞–Ω–≥–ª–∏–π—Å–∫–∏—Ö —Å–ª–æ–≤
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ —É—Å–ø–µ—à–Ω–æ –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –Ω–∞ –ª—é–±–æ–º —è–∑—ã–∫–µ

### 3. **–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º —Å UI —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏**
- **–ö–Ω–æ–ø–∫–∞ –ø–æ–∏—Å–∫–∞**: –£–±—Ä–∞–Ω–∞ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–æ—Å—Ç—å –∏–∫–æ–Ω–∫–∏ üîç, —Å–¥–µ–ª–∞–Ω–∞ –¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω–æ–π (`pointer-events: none`)
- **–°–µ—Ä—ã–µ —Ä–∞–º–∫–∏**: –£–¥–∞–ª–µ–Ω—ã Bootstrap-–æ–≤—Å–∫–∏–µ `border` —Å –∫–∞—Ä—Ç–æ—á–µ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (`border: none !important`)
- **–û—Ç–ª–∞–¥–æ—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è**: –û—á–∏—â–µ–Ω—ã –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ `console.log` –¥–ª—è production-ready –∫–æ–¥–∞

### 4. **–£–ª—É—á—à–µ–Ω–∏–µ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ PDF.js**
- **–ü—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏**: –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `checkPdfJsAvailability()`
- **Fallback —Å–∏—Å—Ç–µ–º—ã**: –°–æ–∑–¥–∞–Ω `simple-pdf-viewer.js` –∫–∞–∫ —Ä–µ–∑–µ—Ä–≤–Ω—ã–π iframe-–ø—Ä–æ—Å–º–æ—Ç—Ä—â–∏–∫
- **Graceful degradation**: PDF.js ‚Üí iframe viewer ‚Üí —Å—Å—ã–ª–∫–∞ –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
- **–ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –ø—Ä–æ–±–ª–µ–º

## –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∏ —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### **–ú–µ—Ç–æ–¥ –æ—Ç–ª–∞–¥–∫–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã DOM**
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –¥–ª—è –≤—ã—è–≤–ª–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤:
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ –¥–≤—É—Ö —Ç–æ—á–∫–∞—Ö (`handleFiles` vs `loadPdf`)
- –í—ã–≤–æ–¥ –≤—Å–µ—Ö ID —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
- –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π DOM –º–µ–∂–¥—É –≤—ã–∑–æ–≤–∞–º–∏

### **–ù–∞–π–¥–µ–Ω–Ω–∞—è root cause**
```html
<!-- ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ (—Å—Ç–∞—Ä–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞) -->
<div id="pdf-viewer">
    <div id="pdf-placeholder">...</div>  <!-- –£–¥–∞–ª—è–µ—Ç—Å—è –ø—Ä–∏ viewer.innerHTML = '' -->
</div>

<!-- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ (–Ω–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞) -->
<div id="pdf-placeholder">...</div>
<div id="pdf-viewer"></div>  <!-- –¢–µ–ø–µ—Ä—å –æ—á–∏—Å—Ç–∫–∞ –Ω–µ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞–µ—Ç placeholder -->
```

## –¢–µ–∫—É—â–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã

### **–ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏**
1. **–ó–∞–≥—Ä—É–∑–∫–∞ PDF** ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –º–Ω–æ–≥–æ—è–∑—ã—á–Ω—ã—Ö –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
2. **–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä PDF** ‚Üí —Å—Ç–∞–±–∏–ª—å–Ω—ã–π PDF.js viewer —Å fallback —Å–∏—Å—Ç–µ–º–∞–º–∏
3. **–ü—Ä–æ—Å–º–æ—Ç—Ä PDF** ‚Üí —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
4. **–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–º–µ—Ç–æ–∫** ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–∏–≤—è–∑–∫–∞ –∫ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–µ–º–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
5. **–£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–º–µ—Ç–æ–∫** ‚Üí —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º –∏ –∞–Ω–∏–º–∞—Ü–∏–µ–π
6. **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö** ‚Üí –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
7. **–ü–æ–∏—Å–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤** ‚Üí —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫ –±–µ–∑ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–æ–π –∏–∫–æ–Ω–∫–∏
8. **–ö–∞—Ç–∞–ª–æ–≥ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤** ‚Üí —á–∏—Å—Ç—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –±–µ–∑ –Ω–µ–∂–µ–ª–∞—Ç–µ–ª—å–Ω—ã—Ö —Ä–∞–º–æ–∫

### **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**
- **Backend**: Django 5.2 —Å AJAX-–ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- **Frontend**: Vanilla JavaScript —Å PDF.js 2.16.105
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: PostgreSQL —Å –º–æ–¥–µ–ª—è–º–∏ PDFDocument, Note, PDFPageText
- **UI/UX**: –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- **Error handling**: –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ fallback —Å–∏—Å—Ç–µ–º—ã

## –°—Ç–∞—Ç—É—Å
‚úÖ **–í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã**. –°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å—Ç–∞–±–∏–ª—å–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –¥–ª—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

–ü–æ—Å–ª–µ–¥–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã –≤ –∫–æ–º–º–∏—Ç `47cc2d3` –≤ –≤–µ—Ç–∫—É `Artem_branch` –∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –≤ —É–¥–∞–ª–µ–Ω–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π.

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏
–°–∏—Å—Ç–µ–º–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏. –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ø–æ–∏—Å–∫–∞ –ø–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É PDF
- –°–∏—Å—Ç–µ–º–∞ —Ç–µ–≥–æ–≤ –¥–ª—è –ª—É—á—à–µ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- –≠–∫—Å–ø–æ—Ä—Ç –∑–∞–º–µ—Ç–æ–∫ –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö
- –ì—Ä—É–ø–ø–æ–≤–∞—è —Ä–∞–±–æ—Ç–∞ —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏ 